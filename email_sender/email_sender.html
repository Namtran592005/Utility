<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="../assets/images/favicon.png" />
    <title>Trình gửi Mail - Công cụ Tiện ích</title>
    <link rel="stylesheet" href="../assets/css/style.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"
    />
  </head>
  <body>
    <div class="container email-sender-container">
      <a href="../index.html" class="back-link">← Quay lại trang chủ</a>
      <h1>Trình gửi Mail Chuyên nghiệp</h1>
      <p class="subtitle">
        Gửi email HTML hàng loạt một cách an toàn thông qua tài khoản Gmail của
        bạn.
      </p>

      <!-- KHỐI THÔNG BÁO TRẠNG THÁI -->
      <div id="status-panel" class="status-bar" style="display: none"></div>

      <!-- FORM GỬI MAIL CHÍNH -->
      <form id="email-form" novalidate>
        <!-- 1. CẤU HÌNH SMTP -->
        <div class="email-sender-block">
          <h3>
            <span class="material-symbols-outlined">key</span>Cấu hình Tài
            khoản Gmail
          </h3>
          <p class="note">
            Sử dụng Mật khẩu ứng dụng (App Password) thay vì mật khẩu email
            thông thường để tăng cường bảo mật.
            <a
              href="https://support.google.com/accounts/answer/185833?hl=vi"
              target="_blank"
              >Xem hướng dẫn</a
            >.
          </p>
          <div class="form-grid-2">
            <div class="form-group">
              <label for="smtp-user">Email Đăng nhập</label>
              <input
                type="email"
                id="smtp-user"
                name="smtp_user"
                placeholder="dia_chi_email@gmail.com"
                required
              />
            </div>
            <div class="form-group">
              <label for="smtp-pass">Mật khẩu Ứng dụng</label>
              <input
                type="password"
                id="smtp-pass"
                name="smtp_pass"
                placeholder="Mật khẩu 16 ký tự"
                required
              />
            </div>
          </div>
        </div>

        <!-- 2. NGƯỜI NHẬN -->
        <div class="email-sender-block">
          <h3>
            <span class="material-symbols-outlined">group</span>Thông tin Người
            nhận
          </h3>
          <div class="form-group">
            <label for="subject">Tiêu đề Email</label>
            <input
              type="text"
              id="subject"
              name="subject"
              placeholder="Tiêu đề email của bạn"
              required
            />
          </div>
          <div class="form-group">
            <label>Người nhận chính (TO)</label>
            <div id="to-list" class="email-list-container"></div>
          </div>
          <div class="form-group">
            <label>Gửi bản sao (CC)</label>
            <div id="cc-list" class="email-list-container"></div>
          </div>
          <div class="form-group">
            <label>Gửi bản sao ẩn danh (BCC)</label>
            <div id="bcc-list" class="email-list-container"></div>
          </div>
        </div>

        <!-- 3. NỘI DUNG HTML -->
        <div class="email-sender-block">
          <h3>
            <span class="material-symbols-outlined">code</span>Nội dung Email
          </h3>
          <div class="form-group">
            <label for="html-file">Tải lên tệp HTML</label>
            <div class="custom-file-upload">
              <input type="file" id="html-file" accept=".html" required />
              <span id="file-name" class="file-name"
                >Chưa có tệp nào được chọn</span
              >
              <label for="html-file" class="btn-file">Chọn Tệp</label>
            </div>
            <p id="html-status" class="note error">
              <span class="material-symbols-outlined"
                >warning</span
              >
              Chưa có nội dung HTML.
            </p>
          </div>
          <!-- Hidden textarea để lưu nội dung file -->
          <textarea
            name="html_content"
            id="html-content"
            style="display: none"
          ></textarea>
        </div>

        <!-- 4. HÀNH ĐỘNG -->
        <div class="button-group" style="justify-content: flex-end">
          <button type="submit" id="send-btn" class="btn btn-success">
            <span class="material-symbols-outlined" style="margin-right: 8px"
              >send</span
            >
            Gửi Email
          </button>
        </div>
      </form>
    </div>

    <script src="email_sender_logic.js" defer></script>
  </body>
</html>